<!doctype html>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="utf-8">
<link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,600" rel="stylesheet">
<title>Maciej Goszczycki</title>
<style>
    * {
        padding: 0;
        margin: 0;
    }

    h1 {
        font: inherit;
        font-style: italic;
        font-size: 120%;
        font-weight: 600;
    }

    body {
        color: #1d1d1d;
        line-height: 1.5;
        font-family: 'Source Code Pro', monospace;
        font-size: 18px;
        max-width: 600px;
        margin: 120px 60px 0;
    }

    .green {
        color: #0f0;
    }

    .red {
        color: #f00;
    }

    .yellow {
        color: #ffd900;
    }

    .blue {
        color: #00f;
    }

    section {
        margin: 40px 0;
    }

    a {
        font: inherit;
        font-weight: 600;
        color: #00f;
        padding: 5px 5px 5px 0;
        text-decoration: none;
    }

    a:hover,
    a:focus {
        text-decoration: underline;
    }

    #big {
        font-size: 600%;
        display: block;
        font-weight: 600;
        color: #000;
    }

    #tape {
        position: fixed;
        right: 8%;
        top: 0;
        height: 100vh;
        width: 0;
        z-index: -1;
    }

    @media (max-width: 500px) {
        #big {
            font-size: 500%;
        }

        body {
            margin: 40px 20px 20px;
        }
    }
</style>
<script>
    const mobileQuery = window.matchMedia("(max-width: 500px)");

    const dimensions = () => {
        const scale = mobileQuery.matches ? 1.5 : 1;
        return {
            spacing: Math.floor(20 / scale),
            sprocket_radius: Math.floor(4 / scale),
            punch_radius: Math.floor(8 / scale)
        };
    }

    const parity = (x) => {
        let odd = false;
        while (x) {
            if (x & 1) odd = !odd;
            x >>= 1;
        }
        return odd;
    }

    window.addEventListener("load", () => {
        const content = document.documentElement.innerHTML;
        const canvas = document.getElementById("tape")
        const ctx = canvas.getContext("2d", { alpha: true });


        let vertical_offset = 0;
        let row_offset = Math.floor(Math.random() * content.length);
        const render = () => {
            const dims = dimensions();

            const drawCircle = (row, hole, radius) => {
                ctx.beginPath();
                ctx.arc(hole * dims.spacing + dims.spacing,
                    (row - 1) * dims.spacing + vertical_offset, radius, 0, Math.PI * 2);
                ctx.fill();
            }

            const drawLine = (x1, y1, x2, y2) => {
                ctx.beginPath();
                ctx.moveTo(x1, y1);
                ctx.lineTo(x2, y2);
                ctx.stroke();
            }

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = "#f3f3f3";
            ctx.strokeStyle = "#f3f3f3";
            ctx.lineWidth = 6;

            vertical_offset += 1;
            if (vertical_offset > dims.spacing) {
                ++row_offset;
                vertical_offset = 0;
            }

            drawLine(0, 0, 0, canvas.height);
            drawLine(canvas.width, 0, canvas.width, canvas.height);
            const row_count = Math.ceil(canvas.height / dims.spacing) + 1;
            for (let row = 0; row < row_count + 1; ++row) {
                const index = (row_offset + row_count - row) % content.length;
                const code = content.charCodeAt(index);
                for (let hole = 0; hole < 7; ++hole) {
                    if (code & (1 << hole)) {
                        drawCircle(row, hole + (hole > 4), dims.punch_radius);
                    }
                }
                if (parity(code)) drawCircle(row, 8, dims.punch_radius);
                drawCircle(row, 5, dims.sprocket_radius);
            }
        }

        const resizeRender = () => {
            const width = dimensions().spacing * 10;
            canvas.style.width = `${width}px`;
            canvas.width = width;
            canvas.height = canvas.offsetHeight;
            render();
        }

        // Debounce resize events, wait 10ms.
        let resize_timeout_handle = null;
        window.addEventListener("resize", () => {
            if (resize_timeout_handle) {
                clearTimeout(resize_timeout_handle);
            }
            resize_timeout_handle = setTimeout(() => {
                resize_timeout_handle = null;
                resizeRender();
            }, 10);
        });

        const renderLoop = () => {
            if (!resize_timeout_handle) {
                render();
            }
            window.requestAnimationFrame(renderLoop);
        }

        // Get this show on the road.
        ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
        resizeRender();
        window.requestAnimationFrame(renderLoop);
    });
</script>
<span id="big">Hi</span>
I'm<br>
<h1>Maciej<br>Goszczycki</h1>

<section>
    I study Computer Science at Maynooth University, build things with computers and have a keen interest in
    programming languages, design and security. I also do competitive programming when I feel like it.
    I interned at <span class="blue">G</span><span class="red">o</span><span class="yellow">o</span><span class="blue">g</span><span
        class="green">l</span><span class="red">e</span> <s>once</s> twice.
</section>

<section>
    <a href="https://github.com/mgoszcz2">Github</a>
    <a href="https://docs.google.com/document/d/1zK_EZ-RrC-9qQ0Ld2dZI9no3NeXukOnBKd_894JxgFg/edit?usp=sharing">CV</a>
    <a href="mailto:mgoszcz2@gmail.com">Email</a>
</section>

<canvas id="tape"></canvas>